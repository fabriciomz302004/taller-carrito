<div class="productos-container">
  <h1>Nuestros Videojuegos</h1>
  
  <!-- Filtros -->
  <div class="filtros">
    <div class="busqueda">
      <input 
        type="text" 
        placeholder="Buscar productos..." 
        [(ngModel)]="terminoBusqueda"
        (input)="onBuscarChange(terminoBusqueda)"
      >
    </div>
    
    <div class="categorias">
      <label for="categoria">Filtrar por categoría:</label>
      <select 
        id="categoria" 
        [(ngModel)]="categoriaSeleccionada"
        (change)="onCategoriaChange(categoriaSeleccionada)"
      >
        <option *ngFor="let categoria of categorias" [value]="categoria">
          {{ categoria === 'todos' ? 'Todos los productos' : categoria }}
        </option>
      </select>
    </div>
  </div>

  <!-- Mensaje de carga -->
  <div *ngIf="cargando" class="cargando">
    <p>Cargando productos...</p>
  </div>

  <!-- Lista de productos -->
  <div *ngIf="!cargando" class="productos-grid">
    <div *ngFor="let producto of productosFiltrados" class="producto-card">
      <div class="producto-imagen">
        <img [src]="producto.imagen" [alt]="producto.titulo" onerror="this.src='/assets/placeholder-game.jpg'">
      </div>
      
      <div class="producto-info">
        <h3>{{ producto.titulo }}</h3>
        <p class="descripcion">{{ producto.descripcion }}</p>
        
        <div class="detalles">
          <span class="precio">{{ producto.precio | currency }}</span>
          <span class="plataforma" *ngIf="producto.plataforma">
            {{ producto.plataforma }}
          </span>
          <span class="genero" *ngIf="producto.genero">
            {{ producto.genero }}
          </span>
        </div>
        
        <button class="btn-agregar" (click)="agregarAlCarrito(producto)">
          Agregar al carrito
        </button>
      </div>
    </div>
  </div>

  <!-- Mensaje si no hay productos -->
  <div *ngIf="!cargando && productosFiltrados.length === 0" class="sin-productos">
    <p>No se encontraron productos que coincidan con tu búsqueda.</p>
  </div>
</div>
